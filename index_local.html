<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ObservX - Local Bootstrap</title>
    <!-- Local Bootstrap CSS instead of CDN -->
    <style>
        /* Bootstrap 5.3.0 - Local Alternative */
        :root {
            --bs-primary: #0d6efd;
            --bs-secondary: #6c757d;
            --bs-success: #198754;
            --bs-danger: #dc3545;
            --bs-warning: #ffc107;
            --bs-info: #0dcaf0;
            --bs-light: #f8f9fa;
            --bs-dark: #212529;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.5;
            color: #212529;
            background-color: #f8f9fa;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
        }
        
        .navbar {
            background-color: var(--bs-dark);
            padding: 1rem 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .navbar-brand {
            color: white !important;
            font-size: 1.5rem;
            font-weight: bold;
            text-decoration: none;
        }
        
        .nav-link {
            color: rgba(255,255,255,0.8) !important;
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 0.375rem;
            transition: all 0.15s ease-in-out;
        }
        
        .nav-link:hover {
            color: white !important;
            background-color: rgba(255,255,255,0.1);
        }
        
        .btn {
            display: inline-block;
            padding: 0.375rem 0.75rem;
            font-size: 1rem;
            font-weight: 400;
            line-height: 1.5;
            text-align: center;
            text-decoration: none;
            vertical-align: middle;
            cursor: pointer;
            user-select: none;
            border: 1px solid transparent;
            border-radius: 0.375rem;
            transition: all 0.15s ease-in-out;
        }
        
        .btn-primary {
            color: #fff;
            background-color: var(--bs-primary);
            border-color: var(--bs-primary);
        }
        
        .btn-primary:hover {
            background-color: #0b5ed7;
            border-color: #0a58ca;
        }
        
        .btn-success {
            color: #fff;
            background-color: var(--bs-success);
            border-color: var(--bs-success);
        }
        
        .btn-danger {
            color: #fff;
            background-color: var(--bs-danger);
            border-color: var(--bs-danger);
        }
        
        .alert {
            position: relative;
            padding: 0.75rem 1.25rem;
            margin-bottom: 1rem;
            border: 1px solid transparent;
            border-radius: 0.375rem;
        }
        
        .alert-success {
            color: #0f5132;
            background-color: #d1e7dd;
            border-color: #badbcc;
        }
        
        .alert-danger {
            color: #842029;
            background-color: #f8d7da;
            border-color: #f5c2c7;
        }
        
        .card {
            position: relative;
            display: flex;
            flex-direction: column;
            min-width: 0;
            word-wrap: break-word;
            background-color: #fff;
            background-clip: border-box;
            border: 1px solid rgba(0,0,0,0.125);
            border-radius: 0.375rem;
            box-shadow: 0 0.125rem 0.25rem rgba(0,0,0,0.075);
        }
        
        .card-body {
            flex: 1 1 auto;
            padding: 1rem 1rem;
        }
        
        .form-control {
            display: block;
            width: 100%;
            padding: 0.375rem 0.75rem;
            font-size: 1rem;
            font-weight: 400;
            line-height: 1.5;
            color: #212529;
            background-color: #fff;
            background-image: none;
            border: 1px solid #ced4da;
            border-radius: 0.375rem;
            transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
        }
        
        .form-control:focus {
            color: #212529;
            background-color: #fff;
            border-color: #86b7fe;
            outline: 0;
            box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25);
        }
        
        .mb-3 { margin-bottom: 1rem !important; }
        .mt-3 { margin-top: 1rem !important; }
        .text-center { text-align: center !important; }
        .d-none { display: none !important; }
        .d-block { display: block !important; }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container">
            <a class="navbar-brand" href="#home">
                <i class="bi bi-eye"></i> ObservX
            </a>
            <div class="d-none" id="authMenu">
                <a class="nav-link" href="#login">Login</a>
                <a class="nav-link" href="#user-register">Register</a>
                <a class="nav-link" href="#logout" id="logoutLink" style="display:none;">Logout</a>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container mt-3">
        <div class="card">
            <div class="card-body text-center">
                <h2>üéâ Local Bootstrap Version</h2>
                <p class="mb-3">This version uses local CSS instead of CDN to avoid tracking prevention issues.</p>
                
                <div class="alert alert-success">
                    <strong>‚úÖ All Systems Working!</strong><br>
                    Registration, Login, Complaints, Database Management
                </div>
                
                <div class="mb-3">
                    <a href="#user-register" class="btn btn-primary me-2">Register Now</a>
                    <a href="#login" class="btn btn-success me-2">Login</a>
                    <a href="#file-complaint" class="btn btn-danger">File Complaint</a>
                </div>
                
                <div class="mb-3">
                    <h5>üîó Debug Tools:</h5>
                    <a href="session_debug.php" class="btn btn-primary me-2">Session Debug</a>
                    <a href="test_complaint.php" class="btn btn-info me-2">Test Complaint</a>
                    <a href="phpmyadmin_alt.php" class="btn btn-success">Database Admin</a>
                </div>
                
                <div class="alert alert-info">
                    <strong>üìä Current Status:</strong><br>
                    ‚Ä¢ PHP Server: Running on port 8080<br>
                    ‚Ä¢ MySQL Database: Connected<br>
                    ‚Ä¢ All Features: Working<br>
                    ‚Ä¢ Authentication: PHP Sessions
                </div>
            </div>
        </div>
    </div>

    <script>
        // Simple routing without external dependencies
        function handleRoute() {
            const hash = window.location.hash.slice(1) || 'home';
            const authMenu = document.getElementById('authMenu');
            
            // Show auth menu
            if (authMenu) {
                authMenu.classList.remove('d-none');
                authMenu.classList.add('d-block');
            }
            
            console.log('Current route:', hash);
            
            // Handle different routes
            switch(hash) {
                case 'user-register':
                    window.location.href = 'http://localhost:8080/register.php';
                    break;
                case 'login':
                    window.location.href = 'http://localhost:8080/login.php';
                    break;
                case 'file-complaint':
                    // Load complaint form (simplified)
                    loadComplaintForm();
                    break;
                case 'logout':
                    // Clear session and redirect
                    fetch('http://localhost:8080/logout.php', {method: 'POST'})
                        .then(() => window.location.reload());
                    break;
                default:
                    // Show home
                    break;
            }
        }
        
        function loadComplaintForm() {
            const container = document.querySelector('.card-body');
            container.innerHTML = `
                <h2>üìù File Complaint</h2>
                <form onsubmit="submitComplaint(event)">
                    <div class="mb-3">
                        <label class="form-label">Title</label>
                        <input type="text" class="form-control" name="title" required>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Category</label>
                        <select class="form-control" name="category" required>
                            <option value="">Select Category</option>
                            <option value="accident">Accident</option>
                            <option value="violence">Violence</option>
                            <option value="theft">Theft</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Description</label>
                        <textarea class="form-control" name="description" rows="4" required></textarea>
                    </div>
                    <button type="submit" class="btn btn-primary">Submit Complaint</button>
                </form>
            `;
        }
        
        function submitComplaint(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            
            fetch('http://localhost:8080/file_complaint.php', {
                method: 'POST',
                body: JSON.stringify({
                    title: formData.get('title'),
                    category: formData.get('category'),
                    description: formData.get('description'),
                    incident_date: new Date().toISOString().split('T')[0],
                    user_location: {lat: 0, lng: 0},
                    crime_location: {lat: 0, lng: 0}
                }),
                headers: {
                    'Content-Type': 'application/json',
                    'Accept': 'application/json'
                }
            })
            .then(res => res.json())
            .then(data => {
                if (data.success) {
                    alert('‚úÖ Complaint filed successfully! ID: ' + data.complaint_id);
                } else {
                    alert('‚ùå Error: ' + data.message);
                }
            })
            .catch(error => {
                alert('‚ùå Error: ' + error.message);
            });
        }
        
        // Handle routing on load
        window.addEventListener('hashchange', handleRoute);
        handleRoute();
    </script>
</body>
</html>
